#### Краткая программа курса
# Построение витрин данных на основе Yandex.ClickHouse

Стек: `python`, `Yandex.ClickHouse`, `swagger\OpenApi`, `JavaScript\bootstrap`

### Легенда
>	Вы включены в команду разработки дополнительного программного обеспечения для проведения мониторинга всех этапов строительства
>на промышленной площадке. В настоящее время, у Вас в организации есть ERP система полного цикла которая позволяет вести учет всех данных
>связанных со строительством любых объектов. Однако, для проведения каждого этапа аудита требуется выезд на объект группы специалистов
>для оценки прогресса. Далее, составляется акт на бумажном носителе, Данный акт и набор документов рассылается всем субподрядчикам. 
>	Каждый субподрядчик, проверяет документы и ведет диалог с контроллирующим органом. Для ускорения данного процесса и повышения
>`прозрачности` деятельности принято решение расширить текущую ERP систему путем создание внешнего модуля (Rest Api) и отдельного WEB приложения (личный кабинет субподрядчика).
>	Так же, ввиду того, что требуется не только хранить всю историю работы но и проводить анализ данных на предмет качества работы
>каждого субподрядчика, принято решение, включить во внешний модуль часть аналитики на основе облачной платформы [Yandex.ClickHouse](https://yandex.ru/dev/clickhouse/)



### Подготовка
1. Установить ClickHouse - https://clickhouse.com/docs/en/install
2. Установить Visual Studio Code - https://code.visualstudio.com/download
	- Установить плагины: Python, PyTest (`ms-python.python`, `littlefoxteam.vscode-python-test-adapter` ,`pamaron.pytest-runner`)
3. Установить pip утилиту `sudo apt install python3-pip`
	- Установить расширение для Python `pip install clickhouse-connect`

### Основные объекты

Основными сущностями в проекте будут считаться: `объект капитального строительства`, `застройщик`, `субподрядчик`, `исполнитель`
Приложение должно оперировать следующими документами: `акт`, `реектр актов`
В рамках каждого документа назначается оценка состояния: `сумма штрафа`, `статус работ`

Определим статусы объекта:

| Статус        | Описание                |
|---------------|-------------------------|
| Подготовка    | Все документы для начала строительства / этапа собраны и проверены. Разрешения выданы |
| Старт         | На объекте начаты строительные работы. Представители субподрядчика прибыли на объект |
| Проверка пройдена | Очередная проверка пройдена без замечаний со стороны контроллирующих органов |
| Замечания | Очередная проверка пройдена с замечаниями. Необходимо устранить все замечания |
| Завершено | Все замечания устранены. Все проверки пройдены. Оплату можно проводить |

### Архитектура

Выбираем вариант - [многослойная архитектура](https://ru.wikipedia.org/wiki/%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D0%B5%D0%B2%D0%B0%D1%8F_%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0)
В проекте будем разделять модели на: `основные`, `для передачи и обработки данных`
Создадим пустой проект и добавим каталоги: `Src/Models`, `Tests`

Создадим основные модели.

| Модель          | Наименование           |
|-----------------|------------------------|
| [progress_status](../Src/Models/Statuses.py)  | Описание статусов  |
| [building](../Src/Models/Building.py) | Объект капитального строительства |
| [contractor](../Src/Models/Contractor.py) | Застройщик / Подрядчик / Субподрядчик |
| [executor](../Src/Models/Executor.py)  | Исполнитель   |
| [act](../Src/Models/Act.py)  | Документ **Акт проверки** |
| | |
| [period](../Src/Models/Period.py) | Обвертка для работы с датой-временем |
| [guid](../Src/Models/Guid.py) | Обвертка для работы с уникальным кодом |
| | |

Так же, добавим [модульные тесты](../Tests/test_models.py).

### Проектирование сервисов

> Подготовка
Устанавливаем модуль [connexion](https://connexion.readthedocs.io/en/latest/) для разработки WEB сервисов `REST API`
```
pip install connexion[swagger-ui]
```











 






	


